<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Free Software Development Logbook | Sebastián Aguilera Novoa </title> <meta name="author" content="Sebastián Aguilera Novoa"> <meta name="description" content="Logbook and notes for the free software development course at IME-USP, 2025-1"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?v=a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?v=f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?v=62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?v=591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?v=6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img/rasta.png?v=91b71688e15c5881dced9fa02f1c3fc9"> <link rel="stylesheet" href="/assets/css/main.css?v=d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://saguileran.github.io/blog/2025/free-software-development/"> <script src="/assets/js/theme.js?v=48c9b5bd7f2e0605e39e579400e22553"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?v=5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Sebastián</span> Aguilera Novoa </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">more </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/bio/">bio</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/books/">bookshelf</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/animes/">my watch list</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main" id="main-content-toc"> <div class="row"> <div class="col-sm-2 toc-div"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-10 toc-content"> <style type="text/css">.container{max-width:85%}li{text-align:justify}</style> <div class="post"> <header class="post-header"> <h1 class="post-title">Free Software Development Logbook</h1> <p class="post-meta"> Created on March 15, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/blog/tag/mac-courses"> <i class="fa-solid fa-hashtag fa-sm"></i> mac-courses</a>   ·   <a href="/blog/category/free-software"> <i class="fa-solid fa-tag fa-sm"></i> free software</a>   <a href="/blog/category/usp"> <i class="fa-solid fa-tag fa-sm"></i> usp</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <hr> <h2 id="introduction">Introduction</h2> <p>This post is created for the Free Software Development course taught by <a href="https://www.ime.usp.br/paulormm/" rel="external nofollow noopener" target="_blank">Professor Paulo R. M. Meirelles</a> at the <a href="https://www.ime.usp.br/" rel="external nofollow noopener" target="_blank">Institute of Mathematics and Statistics (IME)</a> at the <a href="https://www5.usp.br/" rel="external nofollow noopener" target="_blank">University of São Paulo (USP)</a>. The course is designed and maintained by the research group <a href="https://flusp.ime.usp.br/" rel="external nofollow noopener" target="_blank">FLUSP</a>. You can find all tutorials and more detailed information on its official webpage. More information about the course (content, references, etc.) can be found on the official website Janus for the courses, <a href="https://uspdigital.usp.br/janus/componente/disciplinasOferecidasInicial.jsf?action=3&amp;sgldis=MAC5856" rel="external nofollow noopener" target="_blank">MAC5856 - Desenvolvimento de Software Livre</a>.</p> <p>The objective of the course is to introduce students to free and open source software. In Portuguese, both terms mean the same. The course covers basic concepts, appropriate languages, ethical and technical aspects, etc., with the goal of promoting and constructing open and collaborative software. The course focus is to learn and contribute to open projects like the Linux kernel for the <a href="https://www.kernel.org/doc/html/v4.14/driver-api/iio/index.html" rel="external nofollow noopener" target="_blank">IIO subsystem</a>.</p> <p>In addition, there is a new tool implemented for the VMs developement and linux modules design, creation, and testing. The tool is <code class="language-plaintext highlighter-rouge">kw</code>, a kernel developer workflow tool. More information can be found at <a href="https://kworkflow.org/" rel="external nofollow noopener" target="_blank">kworkflow</a>.</p> <blockquote> <p><strong>NOTE</strong></p> <p>The course focuses its tutorials and practices on the Linux kernel subsystem <a href="https://www.kernel.org/doc/html/v4.16/driver-api/iio/index.html" rel="external nofollow noopener" target="_blank">Industrial I/O (IIO)</a>. This subsystem is designed for handling sensors and other devices that provide analog-to-digital or digital-to-analog data conversion, making it a critical component for industrial and embedded systems. <em>The device used for the course is a Lenovo laptop with Ubuntu 24.04.2 LTS.</em></p> </blockquote> <hr> <h2 id="tutorial-1-setting-up-a-test-environment-for-linux-kernel">Tutorial 1: Setting up a test environment for Linux Kernel</h2> <p>The first tutorial of the course provides an introduction to <a href="https://github.com/QEMU" rel="external nofollow noopener" target="_blank">QEMU</a> and <a href="https://github.com/libvirt" rel="external nofollow noopener" target="_blank">libvirt</a>, powerful tools designed to deploy virtual machines (VMs) quickly and efficiently, eliminating the traditional complexities and time-consuming efforts typically associated with VM setup. Both QEMU and libvirt are libraries used for virtualization and resource emulation, enabling users to create and manage virtualized environments with ease.</p> <p>The Linux kernel architecture tested is an ARM for the industrial I/O subsystem (IIO).</p> <p>A detailed guide can be found at: <a href="https://flusp.ime.usp.br/kernel/qemu-libvirt-setup/" rel="external nofollow noopener" target="_blank">Setting up a test environment for Linux Kernel Dev using QEMU and libvirt</a> writtten by <a href="https://linux.ime.usp.br/~marcelosc/" rel="external nofollow noopener" target="_blank">Marcelo Schmitt</a>.</p> <h3 id="summary">Summary</h3> <p>The tutorial is divided into the following sections:</p> <ol> <li>Preparing testing environment directory and “all-in-one” script <ul> <li>Create necessary folders and files.</li> <li>Give the required permissions for files and folders.</li> </ul> </li> <li>Set up and configure a VM running a guest OS <ul> <li>Create an <code class="language-plaintext highlighter-rouge">activate.sh</code> file to deploy VMs manager. To enable it, execute the comand <code class="language-plaintext highlighter-rouge">home/lk_dev/activate.sh</code> or, located in the folder <code class="language-plaintext highlighter-rouge">lk_dev</code> use <code class="language-plaintext highlighter-rouge">.activate.sh</code> or <code class="language-plaintext highlighter-rouge">soruce activate.sh</code>, this will print some green text and a pink prompt preamble to indicate you are in the VM’s manager.</li> <li>Check image OS properties and partition size, then resize the disk image to 5Gb to give space for more linux modules.</li> <li>Extract kernel and initrd images from OS image to create the VM with them</li> <li>Activate the <code class="language-plaintext highlighter-rouge">libvirt</code> damen to use <code class="language-plaintext highlighter-rouge">virsh</code> commands. In addition, starts a default network (to connect the VM with internet) with virsh. It will also enable autostart and persistence for the network.</li> <li>The output for the point, is a bash function that creates a VM named arm64 that creates a VM with some default configuration defined in the activate file.</li> </ul> </li> <li>Configure SSH access from the host to the VM. <ul> <li>Allow ssh connection with the current VM’s credentials, user root without password. There are two important settigns you must done: enable permit root login and permit empty password. This its done by modifying the <code class="language-plaintext highlighter-rouge">/etc/ssh/sshd_config</code> file.</li> <li>Reconfigure the sshd keys and restart the sshd damon.</li> <li>Now, it is possible to connect to the VM machine via ssh, using a client-server approach. Furthermore, it is possible to sent and recive files using Secure Copy Protocol (scp).</li> </ul> </li> <li>Fetch the modules loaded in the guest kernel. <ul> <li>Export the modules installed. To keep the same machine in every moment, it is highly recommended to create a file with the modules used, this can be done wiht <code class="language-plaintext highlighter-rouge">lsmod &gt; vm_mod_list</code>.</li> </ul> </li> <li>Set up host &lt;-&gt; VM file sharing (optional) <ul> <li>This part was tried but for now is not working. After implemented the changes suggested (memory backing and file system configurations) the machine does not work, it does not boot.</li> </ul> </li> </ol> <blockquote> <h4 id="useful-commands"><strong>Useful Commands</strong></h4> <ul> <li> <code class="language-plaintext highlighter-rouge">lsmod</code> - Show the status of modules in the Linux Kernel, more info <a href="https://manpages.ubuntu.com/manpages/trusty/man8/lsmod.8.html" rel="external nofollow noopener" target="_blank">here</a>.</li> <li> <code class="language-plaintext highlighter-rouge">create_vm_virsh</code> - To create a VM with the kernel, initrd, and memory defined in the activate file. This have to be executed once.</li> <li> <code class="language-plaintext highlighter-rouge">virsh start --console VM_name</code> - To start a created machine use.</li> <li> <code class="language-plaintext highlighter-rouge">virsh list --all</code> - Display all VM availables and their current state.</li> <li> <code class="language-plaintext highlighter-rouge">virsh destroy VM_name</code> - Destroy the machine, force to close the machine. It is used when the VM does not response.</li> <li> <code class="language-plaintext highlighter-rouge">virsh undefine VM_name</code> - Forget the VM in the manager. This should be executed together iwth destroy.</li> </ul> </blockquote> <h3 id="troubleshooting">Troubleshooting</h3> <h4 id="ssh-configuration">SSH Configuration</h4> <p>In the part 3, if the <code class="language-plaintext highlighter-rouge">/etc/ssh/</code> folder is missing, it indicates that SSH is not installed on the system. To resolve this issue, follow these steps:</p> <ol> <li> <p>Update and upgrade the system packages:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt upgrade
</code></pre></div> </div> </li> <li> <p>Install the OpenSSH server package to enable SSH functionality:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt <span class="nb">install </span>openssh-server
</code></pre></div> </div> </li> </ol> <p>This will download and configure the necessary SSH dependencies, allowing you to establish an SSH connection.</p> <h4 id="destroying-vm">Destroying VM</h4> <p>There is a minor issue when destroying and undefining the VM. After the machine is killed, it may freeze when using the <code class="language-plaintext highlighter-rouge">virsh start</code> command and fail to display the login prompt. However, you can still access the VM via SSH. To resolve this, ensure the VM is properly shut down before destroying it, and verify the VM’s state using <code class="language-plaintext highlighter-rouge">virsh list --all</code>. If the issue persists, consider restarting the <code class="language-plaintext highlighter-rouge">libvirt</code> service:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl restart libvirtd
</code></pre></div></div> <p>Additionally, check the VM’s configuration and logs for any inconsistencies that might cause the freeze. The image below shows the problem.</p> <div class="row mt-3" style="width:80%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/vm_1-480.webp 480w,/assets/img/posts/flusp/vm_1-800.webp 800w,/assets/img/posts/flusp/vm_1-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/vm_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> An error occurred during the tutorial after destroying the VM and creating it again. </div> <h4 id="shared-memory">Shared Memory</h4> <p>To edit the VM configuration use <code class="language-plaintext highlighter-rouge">EDITOR=vim; virsh edit arm64</code>. As mentioned before, after implemented the suggested configurations the machine does not work, there is an available blog to solve the shared memory issue: <a href="https://discourse.nixos.org/t/virt-manager-cannot-find-virtiofsd/26752/9" rel="external nofollow noopener" target="_blank">Virt-manager cannot find virtiofsd - discourse.nixos</a>. It was tested but does not work`</p> <h3 id="comments">Comments</h3> <p>Although the tutorial introduced powerful tools, their usage is clearly detailed, making them accessible and easy to follow. In my experience, the challenging part was managing the VM with <code class="language-plaintext highlighter-rouge">virsh</code>, as a domain must be properly defined and either closed or shut down to after using, or reset to update changes. On the other hand, despite being an Ubuntu user, I found the image types (qcow2), kernel, initrd, and VM building processes to be entirely new concepts. Considering the environment setup, it was fascinating to define a simple environment with constants and functions, which is somewhat similar to the <code class="language-plaintext highlighter-rouge">.bashrc</code> file in Ubuntu for managing user-specific shell configurations.</p> <blockquote> <p><strong>ADVICE:</strong> Always is requireted to restart the environment after make a change in the activate.sh file.</p> </blockquote> <h3 id="parctical-excersie-ubuntu-jammy-and-amd64-kernels">Parctical excersie: Ubuntu Jammy and AMD64 kernels</h3> <p>As a practical exercise, let’s try to create a VM using the same Debian version but for an AMD64 architecture. The image is at <a href="http://cdimage.debian.org/cdimage/cloud/bookworm/daily/20250217-2026/debian-12-nocloud-amd64-daily-20250217-2026.qcow2" rel="external nofollow noopener" target="_blank">http://cdimage.debian.org/cdimage/cloud/bookworm/daily/20250217-2026/debian-12-nocloud-amd64-daily-20250217-2026.qcow2</a> and use an Ubuntu image. Since the previous image is lightweight, let’s test with a more robust image. To download visit the website <a href="https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-armhf.img" rel="external nofollow noopener" target="_blank">https://cloud-images.ubuntu.com/jammy/current/jammy-server-cloudimg-armhf.img</a>. Then, following the same steps explored in the tutorial it is enough to add two new <code class="language-plaintext highlighter-rouge">create_vm_virsh</code> funtions to the activate file environment for each</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function </span>create_vm_virsh_amd<span class="o">()</span> <span class="o">{</span>
    <span class="nb">sudo </span>virt-install <span class="se">\</span>
      <span class="nt">--name</span> <span class="s2">"amd64"</span> <span class="se">\</span>
      <span class="nt">--memory</span> 4096 <span class="se">\</span>
      <span class="nt">--arch</span> x86_64 <span class="se">\</span>
      <span class="nt">--machine</span> q35 <span class="se">\</span>
      <span class="nt">--osinfo</span> <span class="nv">detect</span><span class="o">=</span>on,require<span class="o">=</span>off <span class="se">\</span>
      <span class="nt">--import</span> <span class="se">\</span>
      <span class="nt">--features</span> <span class="nv">acpi</span><span class="o">=</span>on <span class="se">\</span>
      <span class="nt">--disk</span> <span class="nv">path</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">VM_DIR</span><span class="k">}</span><span class="s2">/amd64_img.qcow2"</span> <span class="se">\</span>
      <span class="nt">--network</span> bridge:virbr0 <span class="se">\</span>
      <span class="nt">--graphics</span> none <span class="se">\</span>
      <span class="nt">--console</span> pty,target_type<span class="o">=</span>serial
<span class="o">}</span>
</code></pre></div></div> <p>The other function. <code class="language-plaintext highlighter-rouge">create_vm_virsh_ubuntu</code>, is pretty similar to the tutorial exemple but changing the name and disk path.</p> <div class="row mt-3" style="width:80%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/AMD64_vm-480.webp 480w,/assets/img/posts/flusp/AMD64_vm-800.webp 800w,/assets/img/posts/flusp/AMD64_vm-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/AMD64_vm.gif" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Example of AMD 64 VM machine initialization. </div> <blockquote> <h4 id="conclusion"><strong>Conclusion</strong></h4> <p>Although all steps were executed successfully, the Ubuntu machine did not perform as expected. This issue likely stems from the kernel used in the tutorial, which includes numerous updates, configurations, drivers, and components that differ significantly from those in the latest version of Ubuntu Jammy. As for the AMD image, it was successfully created; however, due to a lack of in-depth knowledge about AMD systems, its usage was limited to basic operations.</p> </blockquote> <hr> <h2 id="tutorial-2-building-and-booting-a-custom-linux-kernel-for-arm-using-kw">Tutorial 2: Building and booting a custom Linux kernel for ARM using kw</h2> <p>In this tutorial, we explore how to build and compile a Linux kernel with an ARM architecture. The kernel is customized and then booted. The source code is obtained from the Linux community and loaded into memory or hardware, with or without virtualization. Four our case since server and host are sharing the resource the VM uses virtualization. The tutorial also explains what a kernel module is and how it can be written, loaded, and unloaded in the system.</p> <p>An important concept introduced is <em>Cross-compilation</em>, a process where code is compiled on one architecture but executed on another. In our case, we use x64 or x86 host systems to compile and test ARM64 systems. Although these architectures differ significantly, the key distinction is that ARM is designed for devices like smartphones and tablets, while x64/x86 systems are typically used in laptops and desktops. ARM offers several advantages, such as energy efficiency, low battery consumption, and performance comparable to common x64 systems.</p> <p>Finally, the <code class="language-plaintext highlighter-rouge">kw</code> software is introduced. This software enables fast and efficient creation and management of virtual machines (VMs), significantly reducing the effort required for setup and configuration.</p> <p>A detailed guide can be found at: <a href="https://flusp.ime.usp.br/kernel/build-linux-for-arm-kw/" rel="external nofollow noopener" target="_blank">Building and booting a custom Linux kernel for ARM using kw</a> written by <a href="https://davidbtadokoro.tech/" rel="external nofollow noopener" target="_blank">David Tadokoro</a>.</p> <h3 id="summary-1">Summary</h3> <ol> <li>Installing kw <ul> <li>Clone the official <code class="language-plaintext highlighter-rouge">kw</code> repository <code class="language-plaintext highlighter-rouge">https://github.com/kworkflow/kworkflow.git</code> and switch for the unstable branch, this branch is also very stable and contains new updates created for the developers that are not included in the main branch.</li> <li>Install the software by executing <code class="language-plaintext highlighter-rouge">setup.sh --full-installation</code>. The flag passed for the isntallation script is for including tne dependencies installation.</li> <li>To update kw use <code class="language-plaintext highlighter-rouge">kw self-update</code> if is the main branch, in other case add <code class="language-plaintext highlighter-rouge">--unestable</code> for update the pacakge respect the unestable branch.</li> </ul> </li> <li>Cloning a Linux kernel tree <ul> <li>Linux kernels can be found in many official places. These repositories are also known as <em>trees</em>, because the software designed is a tree-like hierarchy. You can get more information of the linux by looking the version name. The most updated official tree versions are known as <em>mainline</em>, also as Linus Torvalds’s tree.</li> <li>Download the IIO subsystem tree by cloning the repo <code class="language-plaintext highlighter-rouge">git://git.kernel.org/pub/scm/linux/kernel/git/jic23/iio.git</code>. This repository contains a huge quantity of comments and weveral branches, since it is a educational excersie is enough to download a single branch (testing) and a few commits, the last 10 for example. This is done using git and its flags.</li> </ul> </li> <li>Configure kw in a local context for IIO development <ul> <li>Initialize <code class="language-plaintext highlighter-rouge">kw</code>. This create an isoleted environment for the kernel development, or even create multple environments for a singe tree.</li> <li>Start the libvirt deamon and the default network, to enalbe ssh connection.</li> <li>Start the VM created in the first tutorial with vrish and check the IP for the VM. If everything goes correctly, now you can connect to the machine with <code class="language-plaintext highlighter-rouge">kw ssh</code>.</li> </ul> </li> <li>Configuring the Linux kernel compilation <ul> <li>To customize and module the building process the Kernel Build System is used, it uses <code class="language-plaintext highlighter-rouge">make</code> and other GNU tools, it always generates a <code class="language-plaintext highlighter-rouge">kbuild</code> and <code class="language-plaintext highlighter-rouge">.config</code> files. These files contains information about the modules configurations, between other stuff. In most of the directories of the kernel there are always a <code class="language-plaintext highlighter-rouge">Kconfig</code> file, furthermore there are default configurations, know as <em>deconfig</em> files. In this part, we create default configurations and then update them with new values, both actiosn are executed with make. To do it, the modules list created in the first tutorial is passed to make, to keep the same modules eviroment and make debugging easer.</li> <li>It is possible to edit the <code class="language-plaintext highlighter-rouge">.config</code> files directly although it is not recommended. Instead, a safer and more practical way is to use a Terminal User Interfaces (TUI) provided by kw. It is done with <code class="language-plaintext highlighter-rouge">kw build --menu</code>. The TUI has many advantages specially for new users. To test the TUI a change in the kernel image is done, expanding or modying it. To verify the change check the building information using <code class="language-plaintext highlighter-rouge">kw build --info</code>.</li> </ul> </li> <li>Building a custom Linux kernel <ul> <li>At present there are many manufactures for hardware with different architectures, where everyone has different instructions for reading and integration. As result, it is necesarry to donwload a suitable GCC compiler, for ARM64 architecture. In debian systems the library is <code class="language-plaintext highlighter-rouge">gcc-aarch64-linux-gnu</code>.</li> <li>Add kw configuraitons fo the arch target architecture (ARM64), corss compiler, and kernel image (the one created in the second tutorial with the name <code class="language-plaintext highlighter-rouge">Image.gz</code>). To check if everyting is sucessfully setup use the command <code class="language-plaintext highlighter-rouge">kw condif --show build</code>.</li> <li>The last substep is compile the linux kernel with the local configurations implemented, <code class="language-plaintext highlighter-rouge">kw build</code>.</li> </ul> </li> <li>Installing modules and booting the custom-built Linux kernel <ul> <li>Although the module was created it is still not installed in the VM, it is necessary to move the module objects. This is done with <code class="language-plaintext highlighter-rouge">kw deploy --modules</code>. It is always required when modifying or adding modules.</li> <li>Update the activate script with the new kernel in the launch and create functions. Then, activate or reload the main environment.</li> <li>To implement the changes done it is required to poweroff the VM and remove it from the virsh manager. Then, create it again using the new kernel configurations.</li> <li>Start the VM and check if the changes were sucessfully. This can be done by verifying the kernel version information with <code class="language-plaintext highlighter-rouge">uname --kernel-realse</code>. You have to see the new name with the modifitacion done.</li> <li>For kernel developers the final step is to install the kernel in the machine. This is done via <code class="language-plaintext highlighter-rouge">make install</code>. Nevertheless, since QEMU and libvir are being used they take of via pinking up the kernel image.</li> </ul> </li> </ol> <p>It is possible to use different cross compilers because there are many availables online comming from different vendors.</p> <blockquote> <h4 id="useful-commands-1"><strong>Useful Commands</strong></h4> <ul> <li> <code class="language-plaintext highlighter-rouge">kw --version</code> - Print information about the <code class="language-plaintext highlighter-rouge">kw</code> release installed</li> <li> <code class="language-plaintext highlighter-rouge">kw build</code> - Compile Linux kernel from source considering local configurations</li> <li> <code class="language-plaintext highlighter-rouge">uname</code> - Displays information about the operating system and hardware of a Linux or Unix-like computer</li> <li> <code class="language-plaintext highlighter-rouge">virsh net-dhcp-leases default</code> - Check the ip VM</li> </ul> </blockquote> <h3 id="troubleshooting-1">Troubleshooting</h3> <p>There were no important issues. The tutorial was completed sucessfully.</p> <p><strong>NOTE:</strong> Always power off the VM before making any changes or edits to the environment or the <code class="language-plaintext highlighter-rouge">activate.sh</code> file. Failing to do so may result in unexpected issues. This tutorial was completed without errors; the issues encountered were primarily due to improper VM usage, such as skipping the VM reboot step.</p> <h3 id="comments-1">Comments</h3> <p>The tutorial was completed smoothly and without any issues. The installation and configuration of <code class="language-plaintext highlighter-rouge">kw</code> were straightforward. The custom Linux kernel was successfully loaded. One of the most important concepts introduced was the creation and use of the <code class="language-plaintext highlighter-rouge">.config</code> file. This file was generated and configured using <code class="language-plaintext highlighter-rouge">make</code>, along with the VM modules, and managed through <code class="language-plaintext highlighter-rouge">kw</code>’s kernel configuration tools.</p> <p>Another key feature introduced was the <code class="language-plaintext highlighter-rouge">kw menu</code>, a powerful tool for managing VM modules, drivers, and other configurations. This interface simplifies the process of customizing and managing kernel settings.</p> <p>Once everything was properly set up, the final step involved building and deploying the custom kernel with the defined local configurations. Thanks to <code class="language-plaintext highlighter-rouge">kw</code>, this process was remarkably simple, requiring just two command lines to complete.</p> <div class="row mt-3" style="width:80%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/kw-menu-480.webp 480w,/assets/img/posts/flusp/kw-menu-800.webp 800w,/assets/img/posts/flusp/kw-menu-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/kw-menu.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Display the Terminal User Interfaces (TUI) provided by linux, a user friendly interface to make changes in the VM kernel configurations. </div> <hr> <h2 id="tutorial-3-introduction-to-linux-kernel-build-configuration-and-modules">Tutorial 3: Introduction to Linux kernel build configuration and modules</h2> <p>This tutorial explains how to configure the Linux kernel build process. The configurations are made in the <code class="language-plaintext highlighter-rouge">Kbuild</code> files and through the <code class="language-plaintext highlighter-rouge">kw</code> menu configuration interface. After creating two modules—a simple module and another that calls it—their initialization and exit functions are tested by loading them into the kernel. The process includes verifying module information, loading and unloading the modules, and checking kernel logs to ensure proper functionality.</p> <p>A detailed guide can be found at: <a href="https://flusp.ime.usp.br/kernel/modules-intro/" rel="external nofollow noopener" target="_blank">Introduction to Linux kernel build configuration and modules</a>. Written by <a href="https://linux.ime.usp.br/~marcelosc/" rel="external nofollow noopener" target="_blank">Marcelo Schmitt</a></p> <h3 id="summary-2">Summary</h3> <ol> <li>Creating a simple example module <ul> <li>Start by creating a C code, Linux is written in c and some in assembler. The code contains two static cuztomized functions for initilize and exit, bot are loaded with the kernel libraries and the final lines is the license. The modules are saved at <code class="language-plaintext highlighter-rouge">drivers/misc</code> subfoler.</li> </ul> </li> <li>Creating Linux kernel configuration symbols <ul> <li>Create a Kconfig configuration symble, this means to add some configurations to the Kconfig file. The configuration added has the same name of the module, im lettercases, and attributes (trista, default, help, help, depends on, select) which help the user for more control and setup.</li> <li>Add the module to the list of build objects in the Makefile.</li> </ul> </li> <li>Configuring the Linux kernel build with menuconfig <ul> <li>Enter to the <em>menuconfig</em> and enable the module. Go to general setup, search the module by name, select it, and then enable it to be loaded.</li> <li>Build the image an modules again, update the <code class="language-plaintext highlighter-rouge">Image.gz</code> then mount the VM and isntall the modules, taking in account the customized module</li> <li>Start the VM and acces to it, could be via ssh.</li> <li>Verify the kernel version, <code class="language-plaintext highlighter-rouge">uname --all</code>.</li> </ul> </li> <li>Installing Linux kernel modules <ul> <li>Verify the modules loaded (<code class="language-plaintext highlighter-rouge">modinfo simple_mod</code>) and the smplae mod information (<code class="language-plaintext highlighter-rouge">lsmod</code>).</li> <li>Load the module, module file (.ko), to the running kernel (<code class="language-plaintext highlighter-rouge">insmod path/to/module.ko</code> or <code class="language-plaintext highlighter-rouge">modprobe module_nam</code>). It is also possible to remove the module with <code class="language-plaintext highlighter-rouge">rmmod module_name</code> or <code class="language-plaintext highlighter-rouge">modprobe -r simple_mode</code> </li> <li>Display the tail of display message, driver message, to check if the module start and exit functions were executed sucessfully. They have to print the same message defined in the first step.</li> </ul> </li> <li>Dependencies between kernel features <ul> <li>Add a callable function to the module. This function is called from other modules and displaies a simple message that contains the module name. In addition, the init and exit functions are updated to be more dinamycal, print the module name from where there been called.</li> <li>Rebuild the module to update the version in the VM, via scp or kw.</li> <li>Create a new module to call the sample module. This module also contains an init and exit functions. Then, load the new module and test it as same as before, use the <code class="language-plaintext highlighter-rouge">dmesg</code> command to chaick the tail after loading and unloading the module.</li> </ul> </li> </ol> <blockquote> <h4 id="useful-commands-2"><strong>Useful Commands</strong></h4> <ul> <li> <code class="language-plaintext highlighter-rouge">make -C "$IIO_TREE" menuconfig</code> - Menuconfig to enable modules and setup kernel configurations.</li> <li> <code class="language-plaintext highlighter-rouge">kw build --clean</code> - Clean any artifacts from previous compilations</li> <li> <code class="language-plaintext highlighter-rouge">kw build</code> - Build image and modules.</li> <li> <code class="language-plaintext highlighter-rouge">dmesg | tail </code> - Show last kernel log messages.</li> <li> <code class="language-plaintext highlighter-rouge">modinfo &lt;module_name&gt;</code> - Show information related to the kernel module.</li> <li> <code class="language-plaintext highlighter-rouge">insmod &lt;module_name&gt;</code> - Loads module at given location.</li> <li> <code class="language-plaintext highlighter-rouge">rmmod &lt;module_name&gt;</code> - Remove kernel module.</li> <li> <code class="language-plaintext highlighter-rouge">modprobe &lt;module_name&gt;</code> - Loads module of given name and its dependencies</li> <li> <code class="language-plaintext highlighter-rouge">modprobe -r &lt;module_name&gt;</code> - Unloads module of given name</li> </ul> </blockquote> <h3 id="troubleshooting-2">Troubleshooting</h3> <p>There was a simple issue when loading the module. After creating the simple example module, the configuration symbols were added, but the <code class="language-plaintext highlighter-rouge">simple_mod</code> module was not included in the list of build objects. As a result, when attempting to test the module, it failed to load and did not function as expected. This minor error highlights the importance of both steps: configuring symbols and ensuring they are added to the list of build objects.</p> <p>Another issue encountered was related to shutting down and unmanaging the VM. When the VM is shut down and removed from the <code class="language-plaintext highlighter-rouge">kw</code> environment, the SSH connection is forgotten. Although it is still possible to connect using a standard SSH command, it is highly recommended to reconfigure the connection through <code class="language-plaintext highlighter-rouge">kw</code> for a smoother workflow.</p> <h3 id="comments-2">Comments</h3> <p>It was clear how the basic functions of the modules, such as the initialization (<code class="language-plaintext highlighter-rouge">init</code>) and cleanup (<code class="language-plaintext highlighter-rouge">exit</code>) functions, operate. However, a deeper analysis requires more advanced knowledge of the C programming language and hardware interactions. The use of <code class="language-plaintext highlighter-rouge">kw</code> significantly simplifies the configuration process by automatically identifying the kernel image and the IIO tree path.</p> <p>One of the most valuable insights from the results is understanding how the functions are invoked. With the addition of a second module that calls the simple module, the driver messages displayed using <code class="language-plaintext highlighter-rouge">dmesg</code> provide a chronological log of function calls. This log demonstrates the order in which drivers are loaded, reflecting the sequence in which they are listed.</p> <p>It is worth noting that the addition and configuration of modules are performed outside the VM, within the activated environment, directly in the Linux kernel directory. In contrast, the testing and verification of these modules are conducted within the VM environment.</p> <div class="row mt-3" style="width:80%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/vm_2-480.webp 480w,/assets/img/posts/flusp/vm_2-800.webp 800w,/assets/img/posts/flusp/vm_2-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/vm_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Example of the <b>menuconfig</b> interface after enabling the custom module. </div> <hr> <h2 id="tutorial-4-introduction-to-linux-kernel-character-device-drivers">Tutorial 4: Introduction to Linux kernel Character Device Drivers</h2> <p>This tutorial provides an introduction to Linux character devices, complemented by a practical example: a basic character driver. These character devices facilitate sequential data transfer between the user and the system using dynamic data streams. They act as a bridge between software and hardware, managing device operations, data flow, and access.</p> <p>A detailed guide can be found at: <a href="https://flusp.ime.usp.br/kernel/char-drivers-intro/" rel="external nofollow noopener" target="_blank">Introduction to Linux kernel Character Device Drivers</a> written by <a href="https://linux.ime.usp.br/~marcelosc/" rel="external nofollow noopener" target="_blank">Marcelo Schmitt</a></p> <h3 id="summary-3">Summary</h3> <p>The topics cover are:</p> <ol> <li>Character devices</li> <li>Major and Minor Numbers</li> <li>File operations</li> <li>Bringing device IDs and file operations together</li> <li>A character device driver example <ul> <li>Create a C code a</li> </ul> </li> <li>Testing the <code class="language-plaintext highlighter-rouge">simple_char</code> driver</li> </ol> <h3 id="troubleshooting-3">Troubleshooting</h3> <p>The results from the read test program, <code class="language-plaintext highlighter-rouge">Read buffer: �մ��</code>, and the write program, <code class="language-plaintext highlighter-rouge">Error: 9wrote -1 bytes to buffer</code>, were different from what was expected. This discrepancy arises because the implementations are overly simplistic and do not account for hardware characteristics or proper error handling. To address these issues, the programs should be enhanced to include robust error-checking mechanisms and adapt to the specific hardware requirements to ensure accurate and reliable operation.</p> <h3 id="comments-3">Comments</h3> <p>As a new student exploring the Linux kernel, this tutorial provided an excellent overview of key concepts, particularly the structure and functionality of kernel modules. It clarified how modules are created, their purpose, and the process of writing them. While the tutorial included the necessary code, I spent considerable time analyzing and understanding the logic behind many lines. However, the hands-on testing process was invaluable, as it demonstrated how modules can be tested, modified, and integrated into the kernel effectively.</p> <hr> <h2 id="tutorial-5-the-iio-dummy-simple-anatomy">Tutorial 5: The IIO Dummy Simple Anatomy</h2> <p>This tutorial provides an overview of the IIO Simple Dummy module, a foundational example illustrating how kernel modules are structured and implemented. It covers constants, functions, methods, structures, registers, and more. The complete module can be found on GitHub at <a href="https://github.com/torvalds/linux/tree/master/drivers/iio/dummy" rel="external nofollow noopener" target="_blank">IIO Dummy Module on GitHub</a>. Additional documentation and resources are available on the <a href="https://kernelnewbies.org/IIO_tasks" rel="external nofollow noopener" target="_blank">Welcome to IIO Tasks page</a>, which offers comprehensive details about the module.</p> <p>The tutorial focuses on the key components of a basic kernel module, emphasizing how to read and write data using channels. It also includes a practical example demonstrating the integration of both read and write functionalities. This serves as an excellent starting point for understanding the anatomy of kernel modules and their interaction with the Industrial I/O (IIO) subsystem.</p> <p>A detailed guide can be found at: <a href="https://flusp.ime.usp.br/iio/iio-dummy-anatomy/" rel="external nofollow noopener" target="_blank">The iio_simple_dummy Anatomy</a> written by <a href="https://siqueira.tech/" rel="external nofollow noopener" target="_blank">Rodrigo Siqueira</a>.</p> <h3 id="summary-4">Summary</h3> <p>The tutorial parts are:</p> <ol> <li>The IIO Dummy Channels Setup</li> <li>The <code class="language-plaintext highlighter-rouge">iio_dummy_read_raw()</code> Function</li> <li>The <code class="language-plaintext highlighter-rouge">*write_raw</code> Function</li> <li>Putting Things Together with Probe Function</li> </ol> <h3 id="troubleshooting-4">Troubleshooting</h3> <p>Since the tutorial is mostly theoretical, explaining code concepts and structures, there were no significant issues encountered. The explanations provided were clear and detailed, making it easy to follow along and understand the material.</p> <h3 id="comments-4">Comments</h3> <p>Despite the tutorial covering several topics, the functions contain numerous lines of code and variables, making them challenging to comprehend. Rodrigo has made a commendable and highly appreciated effort in summarizing all the information about the dummy module into a single tutorial. This consolidation is invaluable for new users, saving them significant time and effort that would otherwise be spent searching for this information or directly analyzing the code to understand its structure.</p> <p>Regarding the practical aspects, while the code is well-documented, creating, or mofifying, a module or function remains a significant challenge. It demands a deep understanding of the C programming language and the intricacies of driver operations.</p> <hr> <h2 id="tutorial-6-sending-patches-by-email-with-git">Tutorial 6: Sending patches by email with git</h2> <p>This tutorial describes how to configure Git to send emails using a Gmail, or any other emails sever. In addition, there is a brief description about the <code class="language-plaintext highlighter-rouge">git send-email</code> command, what flags we are going to use and the meaning of each one. Finally, there are a few tips to test the patch before to sending it, it is highly recommended to avoid send incorrect or wrong styled messages to the main repository.</p> <p>The patch consists of two parts: the cover letter, which is optional but highly recommended, and the message for each commit. These are specified using flags in the <code class="language-plaintext highlighter-rouge">git send-email</code> command. Each commit generates an email containing three sections: the header, the body message, and the code differences between the current code and the proposed changes.</p> <ol> <li> <p><strong>Header</strong>: The header includes essential email metadata such as the sender(s) (<code class="language-plaintext highlighter-rouge">From</code>), recipient (<code class="language-plaintext highlighter-rouge">To</code>), and subject (<code class="language-plaintext highlighter-rouge">Subject</code>). The subject should provide a concise and formal description of the issue being addressed. It is important to use imperative verbs in the subject line, as the changes are presented as actions to be performed. Avoid informal language or unnecessary words. To track patchs use a USP email.</p> </li> <li> <p><strong>Body Message</strong>: The body provides a detailed explanation of the issue and the proposed solution. This section may include longer comments, technical details, and any relevant context to help reviewers understand the changes. Be clear and precise, ensuring the message is informative and professional.</p> </li> <li> <p><strong>Code Differences</strong>: This section displays the differences between the current code and the proposed changes. It highlights the modifications made in the patch, making it easier for reviewers to evaluate the impact of the changes. It is done automatically when using git send email.</p> </li> </ol> <p>By structuring your patch email in this way, you ensure clarity and professionalism, increasing the likelihood of your patch being accepted.</p> <p>A detailed guide can be found at: <a href="https://flusp.ime.usp.br/git/sending-patches-by-email-with-git/" rel="external nofollow noopener" target="_blank">Sending patches by email with git</a> written by <a href="https://matheustavares.dev/" rel="external nofollow noopener" target="_blank">Matheus Tavares</a>.</p> <h3 id="summary-5">Summary</h3> <ol> <li>Setting Git up to send emails</li> <li>How to use <code class="language-plaintext highlighter-rouge">git send-email </code> </li> <li>More tips on patch sending</li> </ol> <blockquote> <h4 id="useful-commands-3"><strong>Useful Commands</strong></h4> <ul> <li> <code class="language-plaintext highlighter-rouge">git format-patch -1 --stdout | ./scripts/checkpatch.pl --</code> - Check patch code style errors.</li> <li> <code class="language-plaintext highlighter-rouge">git send-email -&lt;commits&gt; --dry-run --suppress-cc=all --to=freesoftware2025@gmail.com</code> - Test email sending to course email for verification and feedback. This test but not sent the email, to send it the flag <code class="language-plaintext highlighter-rouge">--dry-run</code> have to be removed.</li> <li> <code class="language-plaintext highlighter-rouge">git send-email --annotate --to="teste@email.com" --cc="test_cc@mail.com" -1</code> - Send last patch and open the user editor to modying it.</li> <li> <code class="language-plaintext highlighter-rouge">git send-email --annotate --cover-letter --thread --no-chain-reply-to --to="teste@email.com" --cc="mailing@list.com" -3 # for a patchset</code> - Send a patch with some configurations.</li> </ul> </blockquote> <h3 id="troubleshooting-5">Troubleshooting</h3> <p>Since Gmail is being accessed by an external application (a third-party app), it is necessary to enable the connection between Git and Gmail. This can be achieved by adjusting the email’s security settings or using a two-factor authentication method. While the latter option is more secure, it is not available for USP emails. Therefore, USP users can lower their email security settings, whereas other users are strongly encouraged to enable two-factor authentication for enhanced security.</p> <h3 id="comments-5">Comments</h3> <p>The tutorial is clear and more for github users.</p> <hr> <h2 id="project-1-sending-a-real-patch">Project 1: Sending a Real Patch</h2> <p>As a first practical exercise, let’s send a simple patch to the official Linux kernel. The objective is to contribute to the Linux kernel’s IIO subsystem or DRM AMD subsystem. The task involves creating and submitting a patch (similar to a commit) to the official Linux kernel repository using the corresponding latest developer branch. This process is carried out via a mailing list. To send the email, Git is utilized. For detailed instructions, refer to <a href="#tutorial-6-sending-patches-by-email-with-git">Tutorial 6: Sending patches by email with git</a>.</p> <p>Since students are not required to have deep knowledge of the Linux kernel and its subsystems, the patches suggested by the professor and mentors involve simple modifications to the code. These include code style corrections (though these are less likely to be accepted), removing duplicate code, eliminating unused functions, making small improvements, or other straightforward changes.</p> <blockquote> <p><strong>NOTE</strong>: The goal is to practice creating and submitting patches to the Linux kernel mailing list, not necessarily to have them accepted in the same course period. The focus is on understanding the workflow, adhering to coding standards, and communicating with maintainers.</p> </blockquote> <h3 id="iio-subsystem">IIO Subsystem</h3> <p>A simple patch to start contributing is removing duplicate code or functions. For the IIO subsystem, there are a few functions duplicated in the drivers. One example is located in the driver <strong>hp03</strong>, found at <code class="language-plaintext highlighter-rouge">drivers/iio/pressure/hp03.c</code>. This file contains four identical lines of code:</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="n">bool</span> <span class="nf">hp03_is_writeable_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">static</span> <span class="n">bool</span> <span class="nf">hp03_is_volatile_reg</span><span class="p">(</span><span class="k">struct</span> <span class="n">device</span> <span class="o">*</span><span class="n">dev</span><span class="p">,</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">reg</span><span class="p">)</span>
<span class="p">{</span>
   <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div> <p>Both functions always return <code class="language-plaintext highlighter-rouge">false</code>, regardless of the register number or device. They are used in a single place within the <code class="language-plaintext highlighter-rouge">hp03_regmap_config</code> structure:</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">regmap_config</span> <span class="n">hp03_regmap_config</span> <span class="o">=</span> <span class="p">{</span>
   <span class="p">.</span><span class="n">reg_bits</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
   <span class="p">.</span><span class="n">val_bits</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>

   <span class="p">.</span><span class="n">max_register</span>	<span class="o">=</span> <span class="n">HP03_EEPROM_CD_OFFSET</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
   <span class="p">.</span><span class="n">cache_type</span>	<span class="o">=</span> <span class="n">REGCACHE_RBTREE</span><span class="p">,</span>

   <span class="p">.</span><span class="n">writeable_reg</span>	<span class="o">=</span> <span class="n">hp03_is_writeable_reg</span><span class="p">,</span>  <span class="c1">// here</span>
   <span class="p">.</span><span class="n">volatile_reg</span>	<span class="o">=</span> <span class="n">hp03_is_volatile_reg</span><span class="p">,</span>   <span class="c1">// here</span>
<span class="p">};</span>
</code></pre></div></div> <p>A naive solution would be to remove the function lines and directly replace them with <code class="language-plaintext highlighter-rouge">false</code> in the structure. However, this approach breaks the code style and completeness of the kernel driver structure, as all recent drivers are expected to include <code class="language-plaintext highlighter-rouge">writeable</code> and <code class="language-plaintext highlighter-rouge">volatile</code> functions based on the device’s characteristics. These functions are typically implemented based on the device’s datasheet, which defines the register values and possible states. Then, the naive solution may be:</p> <div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">regmap_config</span> <span class="n">hp03_regmap_config</span> <span class="o">=</span> <span class="p">{</span>
   <span class="p">.</span><span class="n">reg_bits</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>
   <span class="p">.</span><span class="n">val_bits</span>	<span class="o">=</span> <span class="mi">8</span><span class="p">,</span>

   <span class="p">.</span><span class="n">max_register</span>	<span class="o">=</span> <span class="n">HP03_EEPROM_CD_OFFSET</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
   <span class="p">.</span><span class="n">cache_type</span>	<span class="o">=</span> <span class="n">REGCACHE_RBTREE</span><span class="p">,</span>

   <span class="p">.</span><span class="n">writeable_reg</span>	<span class="o">=</span> <span class="nb">false</span><span class="p">,</span>
   <span class="p">.</span><span class="n">volatile_reg</span>	<span class="o">=</span> <span class="nb">false</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">hp03</code> device, dating back to 2007, lacks detailed information about registers or states in its datasheet (<a href="https://www.sensorica.ru/pdf/HP03.pdf" rel="external nofollow noopener" target="_blank">HP03 Series of Calibrated Sensor Module</a>). In contrast, modern devices, such as the BMP280 pressure sensor (<a href="https://cdn-shop.adafruit.com/datasheets/BST-BMP280-DS001-11.pdf" rel="external nofollow noopener" target="_blank">BMP280 Datasheet</a>), provide comprehensive details about registers and states, which are implemented in their <code class="language-plaintext highlighter-rouge">writeable</code> and <code class="language-plaintext highlighter-rouge">volatile</code> functions.</p> <p>This explains why both functions in <code class="language-plaintext highlighter-rouge">hp03.c</code> return <code class="language-plaintext highlighter-rouge">false</code> and why any changes are not suitable in this case. The <code class="language-plaintext highlighter-rouge">hp03</code> device, introduced in 2007, lacks detailed register or state information in its datasheet (<a href="https://www.sensorica.ru/pdf/HP03.pdf" rel="external nofollow noopener" target="_blank">HP03 Series of Calibrated Sensor Module</a>). Consequently, the functions <code class="language-plaintext highlighter-rouge">hp03_is_writeable_reg</code> and <code class="language-plaintext highlighter-rouge">hp03_is_volatile_reg</code> are implemented to always return <code class="language-plaintext highlighter-rouge">false</code>, as there is no additional information to define specific behavior for these registers.</p> <p>In contrast, modern devices, such as the BMP280 pressure sensor (<a href="https://cdn-shop.adafruit.com/datasheets/BST-BMP280-DS001-11.pdf" rel="external nofollow noopener" target="_blank">BMP280 Datasheet</a>), provide comprehensive details about registers and states. These details allow for the implementation of more sophisticated <code class="language-plaintext highlighter-rouge">writeable</code> and <code class="language-plaintext highlighter-rouge">volatile</code> functions based on the device’s characteristics. For the <code class="language-plaintext highlighter-rouge">hp03</code> driver, however, any attempt to modify these functions without additional technical information would be inappropriate and could lead to incorrect behavior.</p> <h4 id="patch">Patch</h4> <div class="row mt-3" style="width:100%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/patch_iio-480.webp 480w,/assets/img/posts/flusp/patch_iio-800.webp 800w,/assets/img/posts/flusp/patch_iio-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/patch_iio.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/patch_iio_answer-480.webp 480w,/assets/img/posts/flusp/patch_iio_answer-800.webp 800w,/assets/img/posts/flusp/patch_iio_answer-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/patch_iio_answer.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> </div> <p>Because the changes are too simple and generate some warnings, which I was not able to detect, the patch is not accepted. You can view the mail sent at <a href="https://lore.kernel.org/linux-iio/20250429184129.7aff4461@jic23-huawei/" rel="external nofollow noopener" target="_blank">https://lore.kernel.org/linux-iio/20250429184129.7aff4461@jic23-huawei/</a>.</p> <div class="row mt-3" style="width:100%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/patch_IIO_answer_1-480.webp 480w,/assets/img/posts/flusp/patch_IIO_answer_1-800.webp 800w,/assets/img/posts/flusp/patch_IIO_answer_1-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/patch_IIO_answer_1.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/patch_IIO_answer_2-480.webp 480w,/assets/img/posts/flusp/patch_IIO_answer_2-800.webp 800w,/assets/img/posts/flusp/patch_IIO_answer_2-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/patch_IIO_answer_2.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Responses from Jonathan Cameron, the maintainer of the IIO subsystem kernel. </div> <h3 id="drm-amd-subsystem">DRM AMD Subsystem</h3> <p>The process done here is based in the patch <a href="https://lore.kernel.org/all/20250225015532.303032-1-luanicaro@usp.br/#Z31display:dc:bios:command_table_helper.h" rel="external nofollow noopener" target="_blank">https://lore.kernel.org/all/20250225015532.303032-1-luanicaro@usp.br/#Z31display:dc:bios:command_table_helper.h</a> developed by Luan Icaro Pinto Arcanjo <a href="mailto:luanicaro@usp.br">luanicaro@usp.br</a> where he removes some duplications of the amd subsystem.</p> <p>Because the IIO contribution is too simple, the focus patch shifted to another subsystem requiring less technical knowledge, specifically the DRM AMD Linux subsystem, to identify and address duplicate code lines. Using the <code class="language-plaintext highlighter-rouge">arkanjo</code> tool on the path <code class="language-plaintext highlighter-rouge">linux/drivers/gpu/drm/amd</code>, the following results were obtained with 100 % of similarity:</p> <ul> <li> <a href="../../../assets/text/duplicados_amd_drm.txt"><code class="language-plaintext highlighter-rouge">duplicados_amd_drm.txt</code></a>: A report generated by <code class="language-plaintext highlighter-rouge">arkanjo</code> listing the number of repeated lines in descending order.</li> <li> <a href="../../../assets/text/output_parsed.txt"><code class="language-plaintext highlighter-rouge">output_parsed.txt</code></a>: A parsed output listing files with duplicated code, separated by spaces and followed by their similarity coefficient, also ordered in descending order.</li> </ul> <p>These results provide a starting point for identifying and addressing duplicate code in the DRM AMD subsystem, offering a more suitable opportunity for a beginner-level contribution. In summary, there are two functions duplicated many times on the <code class="language-plaintext highlighter-rouge">linux/drivers/gpu/drm/amd/display/dc/irq/dc</code>.</p> <ol> <li> <p>The <code class="language-plaintext highlighter-rouge">hpd_ack()</code> function acknowledges a display hotplug (HPD) interrupt by reading the HPD status, clearing the interrupt, and flipping the interrupt polarity to detect the next plug/unplug event, ensuring proper handling of display connections.</p> <div class="language-c highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="n">bool</span> <span class="nf">hpd_ack</span><span class="p">(</span>
   <span class="k">struct</span> <span class="n">irq_service</span> <span class="o">*</span><span class="n">irq_service</span><span class="p">,</span>
   <span class="k">const</span> <span class="k">struct</span> <span class="n">irq_source_info</span> <span class="o">*</span><span class="n">info</span><span class="p">)</span>
<span class="p">{</span>
   <span class="kt">uint32_t</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">status_reg</span><span class="p">;</span>
   <span class="kt">uint32_t</span> <span class="n">value</span> <span class="o">=</span> <span class="n">dm_read_reg</span><span class="p">(</span><span class="n">irq_service</span><span class="o">-&gt;</span><span class="n">ctx</span><span class="p">,</span> <span class="n">addr</span><span class="p">);</span>
   <span class="kt">uint32_t</span> <span class="n">current_status</span> <span class="o">=</span>
      <span class="n">get_reg_field_value</span><span class="p">(</span>
         <span class="n">value</span><span class="p">,</span>
         <span class="n">HPD0_DC_HPD_INT_STATUS</span><span class="p">,</span>
         <span class="n">DC_HPD_SENSE_DELAYED</span><span class="p">);</span>

   <span class="n">dal_irq_service_ack_generic</span><span class="p">(</span><span class="n">irq_service</span><span class="p">,</span> <span class="n">info</span><span class="p">);</span>

   <span class="n">value</span> <span class="o">=</span> <span class="n">dm_read_reg</span><span class="p">(</span><span class="n">irq_service</span><span class="o">-&gt;</span><span class="n">ctx</span><span class="p">,</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">enable_reg</span><span class="p">);</span>

   <span class="n">set_reg_field_value</span><span class="p">(</span>
      <span class="n">value</span><span class="p">,</span>
      <span class="n">current_status</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
      <span class="n">HPD0_DC_HPD_INT_CONTROL</span><span class="p">,</span>
      <span class="n">DC_HPD_INT_POLARITY</span><span class="p">);</span>

   <span class="n">dm_write_reg</span><span class="p">(</span><span class="n">irq_service</span><span class="o">-&gt;</span><span class="n">ctx</span><span class="p">,</span> <span class="n">info</span><span class="o">-&gt;</span><span class="n">enable_reg</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>

   <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div> </div> </li> <li> <p>The <code class="language-plaintext highlighter-rouge">to_dal_irq_source_dcnX()</code> function maps hardware-specific interrupt source IDs (<code class="language-plaintext highlighter-rouge">src_id</code> and <code class="language-plaintext highlighter-rouge">ext_id</code>) to standardized <code class="language-plaintext highlighter-rouge">dc_irq_source</code> values, handling cases like VBLANK events, page flips, VLINE interrupts, HPD signals, and DMCUB notifications for display control on AMD DCNX GPUs. If no match is found, it returns <code class="language-plaintext highlighter-rouge">DC_IRQ_SOURCE_INVALID</code>.</p> </li> </ol> <p>Both functions are located at the interrupt request (IRQ) module inside the <a href="https://www.kernel.org/doc/html/next/gpu/amdgpu/display/index.html" rel="external nofollow noopener" target="_blank">Display Core (DC)</a> linux drive. The same function is writen in many files with different <a href="https://www.kernel.org/doc/html/next/gpu/amdgpu/display/dcn-overview.html" rel="external nofollow noopener" target="_blank">Display Core Next (DCN)</a> number and have exactly the same code lines. Those duplications are a good patch to send because may remove houndreds lines of code.</p> <h4 id="patch-1">Patch</h4> <h5 id="version-1">Version 1</h5> <p>The patch is reviewed by Alex Hung. The changes generate some code style warnings and was not tested in building.</p> <div class="row mt-3 d-flex align-items-center" style="width:100%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/patch_amd-480.webp 480w,/assets/img/posts/flusp/patch_amd-800.webp 800w,/assets/img/posts/flusp/patch_amd-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/patch_amd.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/patch_amd_response-480.webp 480w,/assets/img/posts/flusp/patch_amd_response-800.webp 800w,/assets/img/posts/flusp/patch_amd_response-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/patch_amd_response.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> First version of the patch. Left side patch sent and right side review recived. </div> <p>You can view the mail sent at <a href="https://lore.kernel.org/amd-gfx/f78f68ba-80e0-47ca-97a2-37a15d076e68@amd.com/" rel="external nofollow noopener" target="_blank">https://lore.kernel.org/amd-gfx/f78f68ba-80e0-47ca-97a2-37a15d076e68@amd.com/</a>.</p> <p>The patch was accepted and included in the official repository by Alex Hung 🎉.</p> <h5 id="version-2">Version 2</h5> <p>The patch is build and code styles warnings are removed. There is still a warning because the email is sent from a different email from it was signed off, the problem is related to the USP server inestability.</p> <div class="row mt-3 d-flex align-items-center" style="width:100%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/patch2_amd-480.webp 480w,/assets/img/posts/flusp/patch2_amd-800.webp 800w,/assets/img/posts/flusp/patch2_amd-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/patch2_amd.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/patch2_0_amd_response-480.webp 480w,/assets/img/posts/flusp/patch2_0_amd_response-800.webp 800w,/assets/img/posts/flusp/patch2_0_amd_response-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/patch2_0_amd_response.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <br> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/patch2_1_amd_response-480.webp 480w,/assets/img/posts/flusp/patch2_1_amd_response-800.webp 800w,/assets/img/posts/flusp/patch2_1_amd_response-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/patch2_1_amd_response.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Second version of the patch. Left side patch sent and right side review recived. THe patch is accepted. </div> <p>You can view the mail sent at <a href="https://lore.kernel.org/amd-gfx/f8299b44-1a11-431d-8c04-b0cb44b0b832@amd.com/" rel="external nofollow noopener" target="_blank">https://lore.kernel.org/amd-gfx/f8299b44-1a11-431d-8c04-b0cb44b0b832@amd.com/</a>.</p> <hr> <h2 id="project-2-contribution-to-arkanjo">Project 2: Contribution to <a href="https://github.com/LipArcanjo/arkanjo/" rel="external nofollow noopener" target="_blank">Arkanjo</a> </h2> <p>For the second phase of the course, I chose to contribute to <a href="https://github.com/LipArcanjo/arkanjo/" rel="external nofollow noopener" target="_blank">Arkanjo</a>, a tool for detecting duplicated functions in codebases. My contributions included:</p> <h3 id="1-resolution-of-issue-1">1. Resolution of Issue <a href="https://github.com/LipArcanjo/arkanjo/issues/1" rel="external nofollow noopener" target="_blank">#1</a> </h3> <p>This issue concerned a color rendering bug in the output text results. The original implementation was optimized for dark terminal backgrounds, resulting in poor contrast and visibility when used with light themes. My solution involved:</p> <ul> <li>Implementing two distinct color sets for light and dark terminal backgrounds</li> <li>Creating three platform-specific utility files: <code class="language-plaintext highlighter-rouge">linux_utils</code>, <code class="language-plaintext highlighter-rouge">windows_utils</code>, and <code class="language-plaintext highlighter-rouge">apple_utils</code>. Each file contains a <code class="language-plaintext highlighter-rouge">UtilsOSDependable</code> class with functions to: <ul> <li>Detect terminal background color (in RGB format)</li> <li>Parse rgb colors and covert them to float data type</li> <li>Calculate color luminance (perceptual brightness)</li> <li>Others auxiliar functions</li> </ul> </li> </ul> <p>The solution has been tested on Linux (Ubuntu 24) and Windows environments, with Apple platform testing pending. The initial pull request has been accepted, though some bug fixes remain under review. A second pull request is currently undergoing evaluation.</p> <div class="row mt-3 d-flex align-items-center" style="width:100%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/arkanjo_dark-480.webp 480w,/assets/img/posts/flusp/arkanjo_dark-800.webp 800w,/assets/img/posts/flusp/arkanjo_dark-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/arkanjo_dark.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/arkanjo_ligth-480.webp 480w,/assets/img/posts/flusp/arkanjo_ligth-800.webp 800w,/assets/img/posts/flusp/arkanjo_ligth-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/arkanjo_ligth.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Testing colors change depending on the terminal background color. Tested on Linux and Windows. </div> <h3 id="2-documentation-enhancement">2. Documentation Enhancement</h3> <p>I developed comprehensive documentation for the tool using <a href="https://www.doxygen.nl/" rel="external nofollow noopener" target="_blank">Doxygen</a>, a widely-used documentation generator that offers:</p> <ul> <li>Extensive customization options</li> <li>Rapid build process</li> <li>Multi-language support (C, C++, Python, Java, Fortran)</li> <li>Regular updates</li> <li>Similar functionality to Python’s Sphinx, but with broader language support</li> </ul> <p>Implementation details:</p> <ul> <li>All header files were annotated following Doxygen best practices</li> <li>Documentation includes detailed descriptions of: files, functions, parameters, and namespaces.</li> </ul> <p>The documentation system features:</p> <ul> <li>Automated builds via GitHub Actions (<a href="https://github.com/LipArcanjo/arkanjo/blob/main/.github/workflows/main.yml" rel="external nofollow noopener" target="_blank">workflow file</a>)</li> <li>Deployment through GitHub Pages</li> </ul> <p>A preview of the documentation is currently available at: <a href="https://saguileran.github.io/arkanjo/html/">https://saguileran.github.io/arkanjo/html/</a> Final deployment to the main repository is pending configuration.</p> <p>Additional improvements needed include:</p> <ul> <li>Code structure refinements</li> <li>Enhanced diagram documentation</li> </ul> <h4 id="final-result">Final Result</h4> <div class="row mt-3 d-flex align-items-center" style="width:100%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/arkanjo_doc-480.webp 480w,/assets/img/posts/flusp/arkanjo_doc-800.webp 800w,/assets/img/posts/flusp/arkanjo_doc-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/arkanjo_doc.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/doxygen_theme-480.webp 480w,/assets/img/posts/flusp/doxygen_theme-800.webp 800w,/assets/img/posts/flusp/doxygen_theme-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/doxygen_theme.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Left: New Arkanjo documentation website, built with Doxygen. Right: Awesome Doxygen theme, a modern, minimalist, and fresh alternative. </div> <p>Although Doxygen offers customization, it is mostly limited to theme layout components, and the overall style remains largely unchanged. As an alternative, there is Awesome Doxygen—a minimalist and modern theme with both light and dark color schemes. Its style is similar to the <a href="https://sphinx-themes.org/sample-sites/sphinx-book-theme/" rel="external nofollow noopener" target="_blank">Sphinx Book theme</a>. However, in practice, Awesome Doxygen did not render colors and shapes correctly, likely because the theme is not fully compatible with all Doxygen versions.</p> <hr> <h2 id="project-3-contributions-to-open-source-projects">Project 3: Contributions to Open Source Projects</h2> <p>In the third part of the course (Project 3), I contributed to two different open source projects.</p> <h3 id="contributing-to-debian">Contributing to Debian</h3> <p>This activity aimed to teach how to contribute to the Debian operating system, covering:</p> <ul> <li>The anatomy of the OS</li> <li>Mandatory and optional files in repositories</li> <li>Package composition</li> <li>Sending patches to the Debian community</li> </ul> <p>The workshop was divided into steps:</p> <ol> <li> <p><strong>Preparing the environment</strong> to test packages, following the tutorial <a href="https://debianbrasil.org.br/pt-br/empacotamento/configurando-seu-ambiente" rel="external nofollow noopener" target="_blank">Setting Up Your Development Environment</a>. The OS was deployed using QEMU and virsh, as in the first part of the course.</p> <p>Code to create the VM with <a href="https://cdimage.debian.org/cdimage/cloud/bookworm/daily/20250603-2132/debian-12-nocloud-amd64-daily-20250603-2132.qcow2" rel="external nofollow noopener" target="_blank">Debian 12 - nocloud - amd</a>:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="k">function </span>create_vm_virsh_debian<span class="o">()</span> <span class="o">{</span>
   <span class="nb">sudo </span>virt-install <span class="se">\</span>
      <span class="nt">--name</span> <span class="s2">"debian"</span> <span class="se">\</span>
      <span class="nt">--memory</span> 4096 <span class="se">\</span>
      <span class="nt">--arch</span> x86_64 <span class="se">\</span>
      <span class="nt">--machine</span> q35 <span class="se">\</span>
      <span class="nt">--osinfo</span> <span class="nv">detect</span><span class="o">=</span>on,require<span class="o">=</span>off <span class="se">\</span>
      <span class="nt">--import</span> <span class="se">\</span>
      <span class="nt">--features</span> <span class="nv">acpi</span><span class="o">=</span>on <span class="se">\</span>
      <span class="nt">--disk</span> <span class="nv">path</span><span class="o">=</span><span class="s2">"</span><span class="k">${</span><span class="nv">VM_DIR</span><span class="k">}</span><span class="s2">/debian12.qcow2"</span> <span class="se">\</span>
      <span class="nt">--network</span> bridge:virbr0 <span class="se">\</span>
      <span class="nt">--graphics</span> none <span class="se">\</span>
      <span class="nt">--console</span> pty,target_type<span class="o">=</span>serial
<span class="o">}</span>
<span class="nb">export</span> <span class="nt">-f</span> create_vm_virsh_debian
</code></pre></div> </div> <p>Note: This was added to the <code class="language-plaintext highlighter-rouge">activate.sh</code> script. It is necessary to increase the disk space to at least 6GB to install the required libraries.</p> </li> <li> <strong>Package selection</strong> for simple modifications, version update, and changelog file: <ul> <li>Chosen package: <strong>ruby-json</strong> </li> <li>CSV tracker: <a href="https://tracker.debian.org/pkg/ruby-json" rel="external nofollow noopener" target="_blank">https://tracker.debian.org/pkg/ruby-json</a> </li> <li>Official repository: <a href="https://salsa.debian.org/ruby-team/ruby-json" rel="external nofollow noopener" target="_blank">https://salsa.debian.org/ruby-team/ruby-json</a> </li> </ul> <p>Complete package list available on the <a href="https://pad.riseup.net/p/dsl2025-debian-packaging-keep" rel="external nofollow noopener" target="_blank">main course pad</a>.</p> </li> <li> <strong>Issue creation</strong> (<a href="https://salsa.debian.org/debian-brasil-team/docs/-/issues/500" rel="external nofollow noopener" target="_blank">issue</a>) in the official docs repository</li> <li> <strong>Build</strong> the software for testing.</li> <li> <strong>Send the patch</strong> with the updates.</li> <li> <strong>Create a pull request</strong>: <a href="https://salsa.debian.org/ruby-team/ruby-json/-/merge_requests/1" rel="external nofollow noopener" target="_blank">Merge request - Update standards-version</a>.</li> </ol> <blockquote> <h4 id="used-commands">Used Commands</h4> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>gbp clone git@salsa.debian.org:saguileran/ruby-json.git  <span class="c"># clone all branches</span>
git checkout pristine-tar                                <span class="c"># use in case of problems</span>
gbp dch                                                  <span class="c"># create updated changelog</span>
gbp buildpackage                                         <span class="c"># build package</span>
git push                                                 <span class="c"># push changes</span>
</code></pre></div> </div> </blockquote> <h4 id="final-result-1">Final Result</h4> <div class="row mt-3 d-flex align-items-center" style="width:100%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/result_debia_pacote-480.webp 480w,/assets/img/posts/flusp/result_debia_pacote-800.webp 800w,/assets/img/posts/flusp/result_debia_pacote-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/result_debia_pacote.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/debian_approved-480.webp 480w,/assets/img/posts/flusp/debian_approved-800.webp 800w,/assets/img/posts/flusp/debian_approved-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/debian_approved.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Left: Final output of the `ruby-json` Debian package build process. Average build time: approximately 12 minutes.. Right: Pull request approved and successfully merged into the official repository. </div> <blockquote> <p>The workshop was excellent and successfully completed without any problems, thanks to the tutors. There was a minor error detected by lintian, but it can be ignored. Although there is a lot of information about Debian packaging, this short workshop gave me a clear overview of the process and the knowledge required to contribute.</p> </blockquote> <h3 id="contributing-to-scikit-maad">Contributing to scikit-maad</h3> <p><a href="https://scikit-maad.github.io/" rel="external nofollow noopener" target="_blank"><strong>scikit-maad</strong></a> is an open-source Python package designed for the quantitative analysis of environmental audio recordings, serving as a comprehensive toolkit for scientists interested in soundscape ecology. The project was initiated in 2021 by <a href="https://juansulloa.github.io/" rel="external nofollow noopener" target="_blank">Juan Sebastián Ulloa</a>, a researcher at the <a href="https://www.humboldt.org.co/" rel="external nofollow noopener" target="_blank">Instituto de Investigación de Recursos Biológicos Alexander von Humboldt</a> in Colombia, along with other collaborators.</p> <p>My contributions involve addressing some of the <a href="https://github.com/scikit-maad/scikit-maad/issues" rel="external nofollow noopener" target="_blank">open issues</a> in the package.</p> <div class="row mt-3 d-flex align-items-center" style="width:80%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/maad_issues-480.webp 480w,/assets/img/posts/flusp/maad_issues-800.webp 800w,/assets/img/posts/flusp/maad_issues-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/maad_issues.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> </div> <p>Additionally, after reaching out to Sebastián, he suggested expanding the package’s functionality by implementing new features related to spectrogram analysis, specifically functions for computing mel-spectrograms, Mel-Frequency Cepstral Coefficients (MFCC), and Linear Frequency Cepstral Coefficients (LFCC), which are currently missing from the toolkit.</p> <p>A spectrogram is a visual representation of the frequency content of an audio signal over time. Various types of spectrograms exist, each offering a unique perspective and extracting different features from the audio. While all are derived from the raw spectrogram, they apply different transformations to highlight specific characteristics. The relationships among these representations are illustrated below:</p> <div class="row mt-3 d-flex align-items-center" style="width:60%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/posts/flusp/torchaudio_feature_extractions-480.webp 480w,/assets/img/posts/flusp/torchaudio_feature_extractions-800.webp 800w,/assets/img/posts/flusp/torchaudio_feature_extractions-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/posts/flusp/torchaudio_feature_extractions.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> </div> <h4 id="example">Example</h4> <p>Let’s see an example of a spectrogram generated from an audio recording:</p> <ul> <li>The original audio waveform shows amplitude over time.</li> <li>The spectrogram transforms this into a time-frequency plot, where brighter or more intense colors indicate higher energy at specific frequencies and times.</li> </ul> <p>Below, you can listen to an audio sample and see its corresponding spectrogram and related feature representations.</p> <div class="row mt-3 justify-content-center"> <div class="col-sm mt-3 mt-md-0 d-flex justify-content-center"> <figure> <audio src="/assets/audio/BpZC57J7.wav" controls=""></audio> </figure> </div> </div> <div class="caption text-center"> Audio sample with a recording of human voice syaing: *"I have that curiosity beside me at this moment"*. </div> <div class="row mt-3 d-flex align-items-center" style="width:100%; margin: 0 auto 0 auto;"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_001-480.webp 480w,https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_001-800.webp 800w,https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_001-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_001.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_007-480.webp 480w,https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_007-800.webp 800w,https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_007-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_007.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_009-480.webp 480w,https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_009-800.webp 800w,https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_009-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_009.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset="https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_011-480.webp 480w,https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_011-800.webp 800w,https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_011-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="https://docs.pytorch.org/audio/master/_images/sphx_glr_audio_feature_extractions_tutorial_011.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Images taken and modified from the Pytorch tutorial <a href="https://docs.pytorch.org/audio/master/tutorials/audio_feature_extractions_tutorial.html#sphx-glr-tutorials-audio-feature-extractions-tutorial-py" rel="external nofollow noopener" target="_blank">Audio Feature Extractions</a> </div> <h2 id="final-comments">Final Comments</h2> <p>At first, the course seemed challenging due to the unfamiliar languages and tools involved, particularly regarding VM setup and deployment. However, since I had prior experience with Ubuntu, I was able to overcome these difficulties successfully—thanks in large part to the helpful monitors, whom I deeply appreciate.</p> <p>The first project proved difficult because I spent too much time deciding how to refactor the code. I initially chose to work on an IIO kernel patch with a simple but tricky change, which I implemented. However, my submission was rejected due to introduced warnings and errors. As a backup plan, I used Arkanjo to search for code duplications and discovered several in the AMD DMR subsystem. There, I removed nearly 500 lines of redundant code, and this time, my patch was accepted quickly.</p> <p>For the second part, I selected Arkanjo—a tool developed at IME—which I explored in depth. I resolved one issue and added robust documentation. While the code changes were applied, the documentation deployment remains pending because pushing to the official repository requires owner permissions, which I don’t have. As a solution, we proposed creating an organization, but this is still in progress.</p> <p>The final project workshop was well-structured and guided, so I encountered no major issues. Additionally, as supplementary work, I spoke with Professor Paulo about contributing to an open-source project from Colombia (scikit-maad), which was my primary motivation for taking the course. While my contributions are complete, they have yet to be published.</p> <p>Overall, I enjoyed the course because most of the work was hands-on, and the proposed activities provided an excellent introduction to contributing to both small and large open-source projects. The foundational theory was clear and helped clarify concepts like “free” vs. “open” software. The classes were engaging and productive, thanks to active discussions among students, professors, and monitors. Personally, I highly recommend this course.</p> <blockquote> <p>As a final comment I want to recommend the <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank"><strong>al-folio</strong></a> website theme, <em>“a beautiful, simple, clean, and responsive Jekyll theme for academics”</em>. It is a great tool with highly customing, look the deployed <a href="https://alshedivat.github.io/al-folio/" rel="external nofollow noopener" target="_blank">website</a> for more information.</p> </blockquote> </div> </article> <br> <hr> <br> <h2>Citation</h2> If you found this useful, please cite this as: <blockquote> <p>Novoa, Sebastián Aguilera (Mar 2025). Free Software Development Logbook. https://saguileran.github.io.</p> </blockquote> <p>or as a BibTeX entry:</p> <div class="language-bibtex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@article</span><span class="p">{</span><span class="nl">novoa2025free-software-development-logbook</span><span class="p">,</span>
  <span class="na">title</span>   <span class="p">=</span> <span class="s">{Free Software Development Logbook}</span><span class="p">,</span>
  <span class="na">author</span>  <span class="p">=</span> <span class="s">{Novoa, Sebastián Aguilera}</span><span class="p">,</span>
  <span class="na">year</span>    <span class="p">=</span> <span class="s">{2025}</span><span class="p">,</span>
  <span class="na">month</span>   <span class="p">=</span> <span class="s">{Mar}</span><span class="p">,</span>
  <span class="na">url</span>     <span class="p">=</span> <span class="s">{https://saguileran.github.io/blog/2025/free-software-development/}</span>
<span class="p">}</span>
</code></pre></div></div> <hr> <h2>References</h2> <div class="publications"> <ol class="bibliography"> <li> <div class="row"> <div class="col col-sm-2 abbr"> <img class="preview z-depth-1 rounded" src="https://flusp.ime.usp.br/img/logo.png"> </div> <div id="flusp" class="col-sm-8"> <div class="title">FLUSP - FLOSS</div> <div class="author"> FLUSP - Instituto São Paulo (USP) </div> <div class="periodical"> 2025 </div> <div class="periodical"> Website of the FLUSP research group: <a href="https://flusp.ime.usp.br/" rel="external nofollow noopener" target="_blank">https://flusp.ime.usp.br/</a>. Here are all the tutorials and more information about the group. </div> <div class="links"> </div> </div> </div> </li> <li> <div class="row"> <div class="col col-sm-2 abbr"> <figure> <picture> <img src="/assets/img/publication_preview/deepseek_logo.png" class="preview z-depth-1 rounded" width="100%" height="auto" alt="deepseek_logo.png" data-zoomable loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div id="deepseek2024" class="col-sm-8"> <div class="title">DeepSeek Chat</div> <div class="author"> DeepSeek </div> <div class="periodical"> 2024 </div> <div class="periodical"> Used por correct gramatic and improve text coherence. Oficcial website: <a href="https://www.deepseek.com" rel="external nofollow noopener" target="_blank">https://www.deepseek.com</a> </div> <div class="links"> </div> </div> </div> </li> <li> <div class="row"> <div class="col col-sm-2 abbr"> <img class="preview z-depth-1 rounded" src="https://doxygen.nl/assets/doxygen.svg"> </div> <div id="Doxygen" class="col-sm-8"> <div class="title">Doxygen: Source code documentation generator tool</div> <div class="author"> Dimitri Heesch </div> <div class="periodical"> 1997 </div> <div class="periodical"> Used for documentation generation for arkanjo tool. Official website: <a href="https://www.doxygen.nl/" rel="external nofollow noopener" target="_blank">https://www.doxygen.nl/</a> </div> <div class="links"> </div> </div> </div> </li> <li> <div class="row"> <div class="col col-sm-2 abbr"> <figure> <picture> <img src="/assets/img/publication_preview/maad_key_visual_blue.png" class="preview z-depth-1 rounded" width="100%" height="auto" alt="maad_key_visual_blue.png" data-zoomable loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div id="maad" class="col-sm-8"> <div class="title">scikit-maad</div> <div class="author"> </div> <div class="periodical"> 2021 </div> <div class="periodical"> An open-source and modular toolbox for quantitative soundscape analysis in Python. Official website: <a href="https://scikit-maad.github.io/index.html" rel="external nofollow noopener" target="_blank">https://scikit-maad.github.io/index.html</a> </div> <div class="links"> </div> </div> </div> </li> <li> <div class="row"> <div class="col col-sm-2 abbr"> <figure> <picture> <img src="/assets/img/publication_preview/debian.png" class="preview z-depth-1 rounded" width="100%" height="auto" alt="debian.png" data-zoomable loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div id="debian" class="col-sm-8"> <div class="title">Debian – The Universal Operating System</div> <div class="author"> Debian Project </div> <div class="periodical"> 2025 </div> <div class="periodical"> Used for the third project, as documentation and guide. Official website: <a href="https://debianbrasil.org.br/" rel="external nofollow noopener" target="_blank">https://debianbrasil.org.br/</a> </div> <div class="links"> </div> </div> </div> </li> </ol> </div> <hr> <div id="giscus_thread" style="max-width: 70%; margin: 0 auto;"> <br> <script defer src="/assets/js/giscus-setup.js"></script> <noscript> Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2026 Sebastián Aguilera Novoa. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?v=a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?v=85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?v=c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?v=2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?v=c15de51d4bb57887caa2c21988d97279"></script> <script defer src="/assets/js/copy_code.js?v=c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?v=d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?v=a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?v=2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?v=f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?v=a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?v=6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?v=6f508d74becd347268a7f822bca7309d"></script> </body> </html>